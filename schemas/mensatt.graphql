"""
Indicates that an Input Object is a OneOf Input Object (and thus requires exactly one of its field be provided)
"""
directive @oneOf on INPUT_OBJECT

"""
Provides a scalar specification URL for specifying the behavior of custom scalar types.
"""
directive @specifiedBy(
  """URL that specifies the behavior of this scalar."""
  url: String!
) on SCALAR

input AddImagesToReviewInput {
  review: UUID!
  images: [ImageInput!]!
}

input AddSideDishToOccurrenceInput {
  occurrence: UUID!
  dish: UUID!
}

input AddTagToOccurrenceInput {
  occurrence: UUID!
  tag: String!
}

input CreateDishAliasInput {
  aliasName: String!
  normalizedAliasName: String!
  dish: UUID!
}

input CreateDishInput {
  nameDe: String!
  nameEn: String
}

input CreateLocationInput {
  externalId: Int!
  name: String!
  visible: Boolean
}

input CreateOccurrenceInput {
  date: Date
  kj: Int
  kcal: Int
  fat: Int
  saturatedFat: Int
  carbohydrates: Int
  sugar: Int
  fiber: Int
  protein: Int
  salt: Int
  priceStudent: Int
  priceStaff: Int
  priceGuest: Int
  dish: UUID!
  location: UUID!
  sideDishes: [UUID!]
  tags: [String!]
}

input CreateReviewInput {
  occurrence: UUID!
  displayName: String
  stars: Int!
  text: String
  images: [ImageInput!]
}

input CreateTagInput {
  key: String!
  name: String!
  description: String!
  shortName: String
  priority: TagPriority
  isAllergy: Boolean
}

input CreateUserInput {
  email: String!
  password: String!
}

scalar Date

input DeleteDishAliasInput {
  aliasName: String!
}

input DeleteOccurrenceInput {
  id: UUID!
}

input DeleteReviewInput {
  id: UUID!
}

type Dish {
  id: UUID!
  nameDe: String!
  nameEn: String
  reviewData(filter: ReviewFilter): ReviewDataDish!
  aliases: [DishAlias!]!
}

type DishAlias {
  aliasName: String!
  normalizedAliasName: String!
  dish: Dish!
}

input DishFilter {
  dishes: [UUID!]
  nameDe: String
  nameEn: String
}

type Image {
  id: UUID!
  review: Review!
}

input ImageInput {
  id: UUID!
  rotation: Int
}

type Location {
  id: UUID!
  externalId: Int!
  name: String!
  visible: Boolean!
}

input LocationFilter {
  ids: [UUID!]
  externalIds: [Int!]
  names: [String!]
  visible: Boolean
}

input LoginUserInput {
  email: String!
  password: String!
}

type Mutation {
  createDish(input: CreateDishInput!): Dish!
  updateDish(input: UpdateDishInput!): Dish!
  createDishAlias(input: CreateDishAliasInput!): DishAlias!
  deleteDishAlias(input: DeleteDishAliasInput!): Boolean!
  createLocation(input: CreateLocationInput!): Location!
  updateLocation(input: UpdateLocationInput!): Location!
  createOccurrence(input: CreateOccurrenceInput!): Occurrence!
  updateOccurrence(input: UpdateOccurrenceInput!): Occurrence!
  deleteOccurrence(input: DeleteOccurrenceInput!): Boolean!
  addSideDishToOccurrence(input: AddSideDishToOccurrenceInput!): OccurrenceSideDish!
  removeSideDishFromOccurrence(input: RemoveSideDishFromOccurrenceInput!): OccurrenceSideDish!
  addTagToOccurrence(input: AddTagToOccurrenceInput!): OccurrenceTag!
  removeTagFromOccurrence(input: RemoveTagFromOccurrenceInput!): OccurrenceTag!
  createReview(input: CreateReviewInput!): Review!
  updateReview(input: UpdateReviewInput!): Review!
  deleteReview(input: DeleteReviewInput!): Boolean!
  addImagesToReview(input: AddImagesToReviewInput!): Review!
  removeImagesFromReview(input: RemoveImagesFromReviewInput!): Review!
  createTag(input: CreateTagInput!): Tag!
  updateTag(input: UpdateTagInput!): Tag!
  loginUser(input: LoginUserInput!): String!
  createUser(input: CreateUserInput!): User!
}

type Occurrence {
  id: UUID!
  date: Date!
  kj: Int
  kcal: Int
  fat: Int
  saturatedFat: Int
  carbohydrates: Int
  sugar: Int
  fiber: Int
  protein: Int
  salt: Int
  priceStudent: Int
  priceStaff: Int
  priceGuest: Int
  notAvailableAfter: Timestamp
  location: Location!
  dish: Dish!
  tags: [Tag!]!
  sideDishes: [Dish!]!
  reviewData(filter: ReviewFilter): ReviewDataOccurrence!
}

input OccurrenceFilter {
  occurrences: [UUID!]
  dishes: [UUID!]
  startDate: Date
  endDate: Date
  location: UUID
}

type OccurrenceSideDish {
  occurrence: Occurrence!
  dish: Dish!
}

type OccurrenceTag {
  occurrence: Occurrence!
  tag: Tag!
}

type Query {
  dishes(filter: DishFilter): [Dish!]!
  images: [Image!]!
  locations(filter: LocationFilter): [Location!]!
  occurrences(filter: OccurrenceFilter): [Occurrence!]!
  reviews(filter: ReviewFilter): [Review!]!
  tags: [Tag!]!
  currentUser: User
  users: [User!]!
}

input RemoveImagesFromReviewInput {
  review: UUID!
  images: [UUID!]!
}

input RemoveSideDishFromOccurrenceInput {
  occurrence: UUID!
  dish: UUID!
}

input RemoveTagFromOccurrenceInput {
  occurrence: UUID!
  tag: String!
}

type Review {
  id: UUID!
  displayName: String
  stars: Int!
  text: String
  createdAt: Timestamp!
  updatedAt: Timestamp!
  acceptedAt: Timestamp
  occurrence: Occurrence!
  images: [Image!]!
}

type ReviewDataDish {
  reviews: [Review!]!
  metadata: ReviewMetadataDish!
  images: [Image!]!
}

type ReviewDataOccurrence {
  reviews: [Review!]!
  metadata: ReviewMetadataOccurrence!
  images: [Image!]!
}

input ReviewFilter {
  approved: Boolean
}

type ReviewMetadataDish {
  averageStars: Float
  reviewCount: Int!
}

type ReviewMetadataOccurrence {
  averageStars: Float
  reviewCount: Int!
}

type Subscription {
  """Subscribe to newly created reviews"""
  reviewCreated: Review!

  """Subscribe to accepted reviews"""
  reviewAccepted: Review!
}

type Tag {
  key: String!
  name: String!
  description: String!
  shortName: String
  priority: TagPriority!
  isAllergy: Boolean!
}

enum TagPriority {
  HIGH
  MEDIUM
  LOW
  HIDE
}

scalar Timestamp

input UpdateDishInput {
  id: UUID!
  nameDe: String
  nameEn: String
}

input UpdateLocationInput {
  id: UUID!
  externalId: Int
  name: String
  visible: Boolean
}

input UpdateOccurrenceInput {
  id: UUID!
  date: Date
  kj: Int
  kcal: Int
  fat: Int
  saturatedFat: Int
  carbohydrates: Int
  sugar: Int
  fiber: Int
  protein: Int
  salt: Int
  priceStudent: Int
  priceStaff: Int
  priceGuest: Int
  dish: UUID
}

input UpdateReviewInput {
  id: UUID!
  occurrence: UUID
  displayName: String
  stars: Int
  text: String
  approved: Boolean
}

input UpdateTagInput {
  key: String!
  name: String
  description: String
  shortName: String
  priority: TagPriority
  isAllergy: Boolean
}

type User {
  id: UUID!
  email: String!
}

"""
A UUID is a unique 128-bit number, stored as 16 octets. UUIDs are parsed as
Strings within GraphQL. UUIDs are used to assign unique identifiers to
entities without requiring a central allocating authority.

# References

* [Wikipedia: Universally Unique Identifier](http://en.wikipedia.org/wiki/Universally_unique_identifier)
* [RFC4122: A Universally Unique Identifier (UUID) URN Namespace](http://tools.ietf.org/html/rfc4122)
"""
scalar UUID

